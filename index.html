<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monte seu Bolo - Confeitaria</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: white;
            color: #764ba2;
            padding: 1rem 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: #764ba2;
            color: white;
        }

        .btn-primary:hover {
            background: #5a3780;
        }

        .btn-secondary {
            background: transparent;
            color: #764ba2;
            border: 2px solid #764ba2;
        }

        .btn-secondary:hover {
            background: rgba(118, 75, 162, 0.1);
        }

        .btn-success {
            background: #00a65a;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        /* P√°gina Inicial */
        .home-hero {
            text-align: center;
            padding: 4rem 2rem;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .home-hero h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 1rem;
        }

        .home-hero p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 2rem;
        }

        .access-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .access-card {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .access-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .access-card-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #764ba2;
        }

        /* √Årea do Cliente - Montagem */
        .cake-builder {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .builder-title {
            text-align: center;
            font-size: 2rem;
            color: #764ba2;
            margin-bottom: 2rem;
        }

        .builder-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            gap: 1rem;
            overflow-x: auto;
        }

        .step {
            flex: 1;
            text-align: center;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
        }

        .step.active {
            background: #764ba2;
            color: white;
        }

        .step-number {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .option-card {
            background: white;
            border: 3px solid #e0e0e0;
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .option-card:hover {
            border-color: #764ba2;
            transform: translateY(-5px);
        }

        .option-card.selected {
            border-color: #764ba2;
            background: #f5f0ff;
        }

        .option-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .option-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .option-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #764ba2;
        }

        .option-description {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }

        /* Resumo do Pedido */
        .order-summary {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 100px;
        }

        .summary-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem;
            background: #f8f8f8;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .summary-label {
            font-weight: 600;
            color: #333;
        }

        .summary-value {
            color: #666;
        }

        .summary-total {
            border-top: 3px solid #764ba2;
            padding-top: 1rem;
            margin-top: 1rem;
        }

        .total-price {
            font-size: 2rem;
            font-weight: bold;
            color: #764ba2;
            text-align: center;
            margin: 1rem 0;
        }

        .whatsapp-btn {
            background: #25D366;
            color: white;
            width: 100%;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .whatsapp-btn:hover {
            background: #128C7E;
        }

        .whatsapp-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Admin */
        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 1rem 2rem;
            background: white;
            border: 2px solid #764ba2;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: #764ba2;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: #764ba2;
            color: white;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .item-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .item-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 1rem;
            background: #f0f0f0;
        }

        .item-info {
            margin-bottom: 1rem;
        }

        .item-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .item-price {
            font-size: 1.3rem;
            font-weight: bold;
            color: #764ba2;
        }

        .item-actions {
            display: flex;
            gap: 0.5rem;
        }

        .icon-btn {
            flex: 1;
            padding: 0.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
        }

        /* Layout de 2 colunas */
        .two-column {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        @media (max-width: 968px) {
            .two-column {
                grid-template-columns: 1fr;
            }

            .order-summary {
                position: static;
            }
        }

        .hidden {
            display: none !important;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #999;
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                üéÇ Confeitaria Fafa
            </div>
            <div class="nav-buttons" id="navButtons">
                <button class="btn btn-secondary" onclick="showLogin()">üîê Admin</button>
            </div>
        </div>
    </header>

    <!-- Container Principal -->
    <div class="container">

        <!-- √Årea do Cliente -->
        <div id="clientPage" class="hidden">
            <div class="two-column">
                <div>
                    <div class="cake-builder">
                        <h1 class="builder-title">Monte seu Bolo Perfeito üéÇ</h1>
                        
                        <div class="builder-steps">
                            <div class="step active" onclick="showStep('massa')">
                                <div class="step-number">1</div>
                                <div>Massa</div>
                            </div>
                            <div class="step" onclick="showStep('recheio')">
                                <div class="step-number">2</div>
                                <div>Recheio</div>
                            </div>
                            <div class="step" onclick="showStep('cobertura')">
                                <div class="step-number">3</div>
                                <div>Cobertura</div>
                            </div>
                        </div>

                        <!-- Op√ß√µes de Massa -->
                        <div id="stepMassa" class="step-content">
                            <h2 style="margin-bottom: 1rem;">Escolha a Massa</h2>
                            <div class="options-grid" id="massaOptions"></div>
                        </div>

                        <!-- Op√ß√µes de Recheio -->
                        <div id="stepRecheio" class="step-content hidden">
                            <h2 style="margin-bottom: 1rem;">Escolha o Recheio</h2>
                            <div class="options-grid" id="recheioOptions"></div>
                        </div>

                        <!-- Op√ß√µes de Cobertura -->
                        <div id="stepCobertura" class="step-content hidden">
                            <h2 style="margin-bottom: 1rem;">Escolha a Cobertura</h2>
                            <div class="options-grid" id="coberturaOptions"></div>
                        </div>
                    </div>
                </div>

                <!-- Resumo do Pedido -->
                <div>
                    <div class="order-summary">
                        <h2 class="summary-title">Seu Bolo Personalizado</h2>
                        
                        <div class="summary-item">
                            <span class="summary-label">üç∞ Massa:</span>
                            <span class="summary-value" id="selectedMassa">-</span>
                        </div>
                        
                        <div class="summary-item">
                            <span class="summary-label">üçì Recheio:</span>
                            <span class="summary-value" id="selectedRecheio">-</span>
                        </div>
                        
                        <div class="summary-item">
                            <span class="summary-label">üé® Cobertura:</span>
                            <span class="summary-value" id="selectedCobertura">-</span>
                        </div>

                        <div class="summary-total">
                            <div class="total-price" id="totalPrice">R$ 0,00</div>
                            <button class="whatsapp-btn" id="finishBtn" onclick="sendWhatsApp()" disabled>
                                üì± Fazer Pedido pelo WhatsApp
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- √Årea Administrativa -->
        <div id="storePage" class="hidden">
            <div style="background: white; padding: 2rem; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                <div class="admin-tabs">
                    <button class="tab-btn active" onclick="showTab('massa')">üç∞ Massas</button>
                    <button class="tab-btn" onclick="showTab('recheio')">üçì Recheios</button>
                    <button class="tab-btn" onclick="showTab('cobertura')">üé® Coberturas</button>
                </div>

                <button class="btn btn-success" style="margin-bottom: 2rem;" onclick="showItemForm()">
                    ‚ûï Adicionar Novo Item
                </button>

                <!-- Lista de Massas -->
                <div id="tabMassa" class="tab-content">
                    <h2 style="margin-bottom: 1rem;">Massas Cadastradas</h2>
                    <div class="items-grid" id="massaList"></div>
                </div>

                <!-- Lista de Recheios -->
                <div id="tabRecheio" class="tab-content hidden">
                    <h2 style="margin-bottom: 1rem;">Recheios Cadastrados</h2>
                    <div class="items-grid" id="recheioList"></div>
                </div>

                <!-- Lista de Coberturas -->
                <div id="tabCobertura" class="tab-content hidden">
                    <h2 style="margin-bottom: 1rem;">Coberturas Cadastradas</h2>
                    <div class="items-grid" id="coberturaList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Login -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login Administrativo</h2>
                <button class="close-modal" onclick="closeModal('loginModal')">‚úï</button>
            </div>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>Usu√°rio</label>
                    <input type="text" id="loginUser" placeholder="Digite o usu√°rio" required>
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="loginPassword" placeholder="Digite a senha" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Entrar</button>
            </form>
        </div>
    </div>

    <!-- Modal Item (Adicionar/Editar) -->
    <div class="modal" id="itemModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="itemModalTitle">Adicionar Item</h2>
                <button class="close-modal" onclick="closeModal('itemModal')">‚úï</button>
            </div>
            <form onsubmit="saveItem(event)">
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="itemName" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <textarea id="itemDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Pre√ßo (R$)</label>
                    <input type="number" id="itemPrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Imagem</label>
                    <input type="file" id="itemImage" accept="image/*" onchange="previewImage(event)">
                    <img id="imagePreview" style="width: 100%; margin-top: 1rem; border-radius: 8px; display: none;">
                </div>
                <button type="submit" class="btn btn-success" style="width: 100%;">Salvar</button>
            </form>
        </div>
    </div>

    <script>
        // Vari√°veis globais
        let currentUser = null;
        let currentTab = 'massa';
        let editingItemId = null;
        
        let massas = [];
        let recheios = [];
        let coberturas = [];
        
        let selectedMassa = null;
        let selectedRecheio = null;
        let selectedCobertura = null;
        
        const WHATSAPP_NUMBER = '5561991944143';

        // Carregar dados
        function loadData() {
            const savedMassas = localStorage.getItem('massas');
            const savedRecheios = localStorage.getItem('recheios');
            const savedCoberturas = localStorage.getItem('coberturas');

            if (savedMassas) massas = JSON.parse(savedMassas);
            else {
                massas = [
                    {
                        id: 1,
                        name: 'Massa de Chocolate',
                        description: 'Massa fofinha de chocolate belga',
                        price: 25.00,
                        image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%238B4513" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3Eüç´%3C/text%3E%3C/svg%3E'
                    },
                    {
                        id: 2,
                        name: 'Massa de Baunilha',
                        description: 'Massa cl√°ssica de baunilha',
                        price: 20.00,
                        image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23F5DEB3" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3Eüç∞%3C/text%3E%3C/svg%3E'
                    }
                ];
                saveData();
            }

            if (savedRecheios) recheios = JSON.parse(savedRecheios);
            else {
                recheios = [
                    {
                        id: 1,
                        name: 'Brigadeiro',
                        description: 'Cremoso brigadeiro gourmet',
                        price: 15.00,
                        image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%234B3621" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3Eüç´%3C/text%3E%3C/svg%3E'
                    },
                    {
                        id: 2,
                        name: 'Doce de Leite',
                        description: 'Doce de leite cremoso argentino',
                        price: 12.00,
                        image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23D2691E" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3EüçØ%3C/text%3E%3C/svg%3E'
                    }
                ];
                saveData();
            }

            if (savedCoberturas) coberturas = JSON.parse(savedCoberturas);
            else {
                coberturas = [
                    {
                        id: 1,
                        name: 'Ganache de Chocolate',
                        description: 'Cobertura de chocolate meio amargo',
                        price: 18.00,
                        image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%233B2F2F" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3Eüç´%3C/text%3E%3C/svg%3E'
                    },
                    {
                        id: 2,
                        name: 'Chantilly',
                        description: 'Chantilly tradicional decorado',
                        price: 15.00,
                        image: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23FFFAF0" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="gray" font-size="80"%3E‚òÅÔ∏è%3C/text%3E%3C/svg%3E'
                    }
                ];
                saveData();
            }
        }

        function saveData() {
            localStorage.setItem('massas', JSON.stringify(massas));
            localStorage.setItem('recheios', JSON.stringify(recheios));
            localStorage.setItem('coberturas', JSON.stringify(coberturas));
        }

        // Navega√ß√£o
        function showHome() {
            document.getElementById('clientPage').classList.remove('hidden');
            document.getElementById('storePage').classList.add('hidden');
            currentUser = null;
            updateNavButtons();
            renderClientOptions();
        }

        function showClientPage() {
            document.getElementById('clientPage').classList.remove('hidden');
            document.getElementById('storePage').classList.add('hidden');
            updateNavButtons();
            renderClientOptions();
        }

        function showLogin() {
            document.getElementById('loginModal').classList.add('active');
        }

        function handleLogin(event) {
            event.preventDefault();
            const user = document.getElementById('loginUser').value;
            const password = document.getElementById('loginPassword').value;

            if (user.toLowerCase() === 'fafa' && password === '1050') {
                currentUser = { user: 'fafa' };
                closeModal('loginModal');
                showStorePage();
            } else {
                alert('Usu√°rio ou senha incorretos!\n\nUse:\nUsu√°rio: fafa\nSenha: 1050');
            }
        }

        function showStorePage() {
            document.getElementById('clientPage').classList.add('hidden');
            document.getElementById('storePage').classList.remove('hidden');
            updateNavButtons();
            renderAdminItems();
        }

        function updateNavButtons() {
            const navButtons = document.getElementById('navButtons');
            if (currentUser) {
                navButtons.innerHTML = `
                    <span style="color: #764ba2; margin-right: 1rem; font-weight: 600;">
                        üè™ ${currentUser.user}
                    </span>
                    <button class="btn btn-secondary" onclick="logout()">Sair</button>
                `;
            } else {
                navButtons.innerHTML = `
                    <button class="btn btn-secondary" onclick="showLogin()">üîê Admin</button>
                `;
            }
        }

        function logout() {
            currentUser = null;
            showHome();
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Cliente - Steps
        function showStep(step) {
            // Atualizar steps visuais
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.step').forEach((s, i) => {
                if ((step === 'massa' && i === 0) || 
                    (step === 'recheio' && i === 1) || 
                    (step === 'cobertura' && i === 2)) {
                    s.classList.add('active');
                }
            });

            // Mostrar conte√∫do correspondente
            document.getElementById('stepMassa').classList.add('hidden');
            document.getElementById('stepRecheio').classList.add('hidden');
            document.getElementById('stepCobertura').classList.add('hidden');
            
            if (step === 'massa') document.getElementById('stepMassa').classList.remove('hidden');
            if (step === 'recheio') document.getElementById('stepRecheio').classList.remove('hidden');
            if (step === 'cobertura') document.getElementById('stepCobertura').classList.remove('hidden');
        }

        function renderClientOptions() {
            renderMassaOptions();
            renderRecheioOptions();
            renderCoberturaOptions();
            updateSummary();
        }

        function renderMassaOptions() {
            const container = document.getElementById('massaOptions');
            if (massas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üç∞</div>
                        <p>Nenhuma massa dispon√≠vel no momento</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = massas.map(massa => `
                <div class="option-card ${selectedMassa?.id === massa.id ? 'selected' : ''}" 
                     onclick="selectMassa(${massa.id})">
                    <img src="${massa.image}" alt="${massa.name}" class="option-icon" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px;">
                    <div class="option-name">${massa.name}</div>
                    <div class="option-price">R$ ${massa.price.toFixed(2)}</div>
                    ${massa.description ? `<div class="option-description">${massa.description}</div>` : ''}
                </div>
            `).join('');
        }

        function renderRecheioOptions() {
            const container = document.getElementById('recheioOptions');
            if (recheios.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üçì</div>
                        <p>Nenhum recheio dispon√≠vel no momento</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = recheios.map(recheio => `
                <div class="option-card ${selectedRecheio?.id === recheio.id ? 'selected' : ''}" 
                     onclick="selectRecheio(${recheio.id})">
                    <img src="${recheio.image}" alt="${recheio.name}" class="option-icon" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px;">
                    <div class="option-name">${recheio.name}</div>
                    <div class="option-price">R$ ${recheio.price.toFixed(2)}</div>
                    ${recheio.description ? `<div class="option-description">${recheio.description}</div>` : ''}
                </div>
            `).join('');
        }

        function renderCoberturaOptions() {
            const container = document.getElementById('coberturaOptions');
            if (coberturas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üé®</div>
                        <p>Nenhuma cobertura dispon√≠vel no momento</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = coberturas.map(cobertura => `
                <div class="option-card ${selectedCobertura?.id === cobertura.id ? 'selected' : ''}" 
                     onclick="selectCobertura(${cobertura.id})">
                    <img src="${cobertura.image}" alt="${cobertura.name}" class="option-icon" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px;">
                    <div class="option-name">${cobertura.name}</div>
                    <div class="option-price">R$ ${cobertura.price.toFixed(2)}</div>
                    ${cobertura.description ? `<div class="option-description">${cobertura.description}</div>` : ''}
                </div>
            `).join('');
        }

        function selectMassa(id) {
            selectedMassa = massas.find(m => m.id === id);
            renderMassaOptions();
            updateSummary();
            showStep('recheio');
        }

        function selectRecheio(id) {
            selectedRecheio = recheios.find(r => r.id === id);
            renderRecheioOptions();
            updateSummary();
            showStep('cobertura');
        }

        function selectCobertura(id) {
            selectedCobertura = coberturas.find(c => c.id === id);
            renderCoberturaOptions();
            updateSummary();
        }

        function updateSummary() {
            document.getElementById('selectedMassa').textContent = selectedMassa ? `${selectedMassa.name} - R$ ${selectedMassa.price.toFixed(2)}` : '-';
            document.getElementById('selectedRecheio').textContent = selectedRecheio ? `${selectedRecheio.name} - R$ ${selectedRecheio.price.toFixed(2)}` : '-';
            document.getElementById('selectedCobertura').textContent = selectedCobertura ? `${selectedCobertura.name} - R$ ${selectedCobertura.price.toFixed(2)}` : '-';

            const total = (selectedMassa?.price || 0) + (selectedRecheio?.price || 0) + (selectedCobertura?.price || 0);
            document.getElementById('totalPrice').textContent = `R$ ${total.toFixed(2)}`;

            const finishBtn = document.getElementById('finishBtn');
            if (selectedMassa && selectedRecheio && selectedCobertura) {
                finishBtn.disabled = false;
            } else {
                finishBtn.disabled = true;
            }
        }

        function sendWhatsApp() {
            if (!selectedMassa || !selectedRecheio || !selectedCobertura) {
                alert('Por favor, complete todas as etapas do seu bolo!');
                return;
            }

            const total = selectedMassa.price + selectedRecheio.price + selectedCobertura.price;

            let message = 'üéÇ *Novo Pedido - Confeitaria Fafa*\n\n';
            message += '*MEU BOLO PERSONALIZADO:*\n\n';
            message += `üç∞ *Massa:* ${selectedMassa.name}\n`;
            message += `   R$ ${selectedMassa.price.toFixed(2)}\n\n`;
            message += `üçì *Recheio:* ${selectedRecheio.name}\n`;
            message += `   R$ ${selectedRecheio.price.toFixed(2)}\n\n`;
            message += `üé® *Cobertura:* ${selectedCobertura.name}\n`;
            message += `   R$ ${selectedCobertura.price.toFixed(2)}\n\n`;
            message += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            message += `üí∞ *VALOR TOTAL: R$ ${total.toFixed(2)}*\n\n`;
            message += 'üìù Por favor, confirme os detalhes e informe:\n';
            message += '‚Ä¢ Seu nome completo\n';
            message += '‚Ä¢ Data de entrega desejada\n';
            message += '‚Ä¢ Observa√ß√µes adicionais';

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
        }

        // Admin - Tabs
        function showTab(tab) {
            currentTab = tab;
            
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
            
            if (tab === 'massa') {
                document.querySelectorAll('.tab-btn')[0].classList.add('active');
                document.getElementById('tabMassa').classList.remove('hidden');
            } else if (tab === 'recheio') {
                document.querySelectorAll('.tab-btn')[1].classList.add('active');
                document.getElementById('tabRecheio').classList.remove('hidden');
            } else if (tab === 'cobertura') {
                document.querySelectorAll('.tab-btn')[2].classList.add('active');
                document.getElementById('tabCobertura').classList.remove('hidden');
            }
            
            renderAdminItems();
        }

        function renderAdminItems() {
            renderAdminMassas();
            renderAdminRecheios();
            renderAdminCoberturas();
        }

        function renderAdminMassas() {
            const container = document.getElementById('massaList');
            if (massas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üç∞</div>
                        <p>Nenhuma massa cadastrada</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = massas.map(massa => `
                <div class="item-card">
                    <img src="${massa.image}" alt="${massa.name}" class="item-image">
                    <div class="item-info">
                        <div class="item-name">${massa.name}</div>
                        <div class="item-price">R$ ${massa.price.toFixed(2)}</div>
                        ${massa.description ? `<p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">${massa.description}</p>` : ''}
                    </div>
                    <div class="item-actions">
                        <button class="icon-btn btn-warning" onclick="editItem('massa', ${massa.id})">‚úèÔ∏è</button>
                        <button class="icon-btn btn-danger" onclick="deleteItem('massa', ${massa.id})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function renderAdminRecheios() {
            const container = document.getElementById('recheioList');
            if (recheios.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üçì</div>
                        <p>Nenhum recheio cadastrado</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = recheios.map(recheio => `
                <div class="item-card">
                    <img src="${recheio.image}" alt="${recheio.name}" class="item-image">
                    <div class="item-info">
                        <div class="item-name">${recheio.name}</div>
                        <div class="item-price">R$ ${recheio.price.toFixed(2)}</div>
                        ${recheio.description ? `<p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">${recheio.description}</p>` : ''}
                    </div>
                    <div class="item-actions">
                        <button class="icon-btn btn-warning" onclick="editItem('recheio', ${recheio.id})">‚úèÔ∏è</button>
                        <button class="icon-btn btn-danger" onclick="deleteItem('recheio', ${recheio.id})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function renderAdminCoberturas() {
            const container = document.getElementById('coberturaList');
            if (coberturas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üé®</div>
                        <p>Nenhuma cobertura cadastrada</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = coberturas.map(cobertura => `
                <div class="item-card">
                    <img src="${cobertura.image}" alt="${cobertura.name}" class="item-image">
                    <div class="item-info">
                        <div class="item-name">${cobertura.name}</div>
                        <div class="item-price">R$ ${cobertura.price.toFixed(2)}</div>
                        ${cobertura.description ? `<p style="color: #666; font-size: 0.9rem; margin-top: 0.5rem;">${cobertura.description}</p>` : ''}
                    </div>
                    <div class="item-actions">
                        <button class="icon-btn btn-warning" onclick="editItem('cobertura', ${cobertura.id})">‚úèÔ∏è</button>
                        <button class="icon-btn btn-danger" onclick="deleteItem('cobertura', ${cobertura.id})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }

        function showItemForm(type = null, id = null) {
            editingItemId = id;
            
            if (id) {
                let item;
                if (currentTab === 'massa') item = massas.find(m => m.id === id);
                if (currentTab === 'recheio') item = recheios.find(r => r.id === id);
                if (currentTab === 'cobertura') item = coberturas.find(c => c.id === id);
                
                if (item) {
                    document.getElementById('itemModalTitle').textContent = 'Editar Item';
                    document.getElementById('itemName').value = item.name;
                    document.getElementById('itemDescription').value = item.description || '';
                    document.getElementById('itemPrice').value = item.price;
                    
                    const preview = document.getElementById('imagePreview');
                    preview.src = item.image;
                    preview.style.display = 'block';
                }
            } else {
                document.getElementById('itemModalTitle').textContent = 'Adicionar Item';
                document.getElementById('itemName').value = '';
                document.getElementById('itemDescription').value = '';
                document.getElementById('itemPrice').value = '';
                document.getElementById('imagePreview').style.display = 'none';
            }
            
            document.getElementById('itemModal').classList.add('active');
        }

        function previewImage(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('imagePreview');
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        function saveItem(event) {
            event.preventDefault();
            
            const name = document.getElementById('itemName').value;
            const description = document.getElementById('itemDescription').value;
            const price = parseFloat(document.getElementById('itemPrice').value);
            const imageFile = document.getElementById('itemImage').files[0];
            
            const processItem = (imageData) => {
                const defaultImages = {
                    massa: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23F5DEB3" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3Eüç∞%3C/text%3E%3C/svg%3E',
                    recheio: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23FF69B4" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3Eüçì%3C/text%3E%3C/svg%3E',
                    cobertura: 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%238B4513" width="400" height="300"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="white" font-size="80"%3Eüé®%3C/text%3E%3C/svg%3E'
                };

                if (editingItemId) {
                    if (currentTab === 'massa') {
                        const index = massas.findIndex(m => m.id === editingItemId);
                        massas[index] = {
                            ...massas[index],
                            name,
                            description,
                            price,
                            image: imageData || massas[index].image
                        };
                    } else if (currentTab === 'recheio') {
                        const index = recheios.findIndex(r => r.id === editingItemId);
                        recheios[index] = {
                            ...recheios[index],
                            name,
                            description,
                            price,
                            image: imageData || recheios[index].image
                        };
                    } else if (currentTab === 'cobertura') {
                        const index = coberturas.findIndex(c => c.id === editingItemId);
                        coberturas[index] = {
                            ...coberturas[index],
                            name,
                            description,
                            price,
                            image: imageData || coberturas[index].image
                        };
                    }
                } else {
                    const newItem = {
                        id: Date.now(),
                        name,
                        description,
                        price,
                        image: imageData || defaultImages[currentTab]
                    };
                    
                    if (currentTab === 'massa') massas.push(newItem);
                    if (currentTab === 'recheio') recheios.push(newItem);
                    if (currentTab === 'cobertura') coberturas.push(newItem);
                }
                
                saveData();
                closeModal('itemModal');
                renderAdminItems();
                renderClientOptions();
                
                event.target.reset();
                document.getElementById('imagePreview').style.display = 'none';
            };

            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    processItem(e.target.result);
                };
                reader.readAsDataURL(imageFile);
            } else {
                processItem(null);
            }
        }

        function editItem(type, id) {
            showItemForm(type, id);
        }

        function deleteItem(type, id) {
            if (!confirm('Tem certeza que deseja excluir este item?')) return;
            
            if (type === 'massa') {
                massas = massas.filter(m => m.id !== id);
            } else if (type === 'recheio') {
                recheios = recheios.filter(r => r.id !== id);
            } else if (type === 'cobertura') {
                coberturas = coberturas.filter(c => c.id !== id);
            }
            
            saveData();
            renderAdminItems();
            renderClientOptions();
        }

        // Inicializar
        loadData();
        showClientPage(); // Inicia direto na √°rea do cliente
        
        // Fechar modais clicando fora
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        };
    </script>
</body>
</html>
